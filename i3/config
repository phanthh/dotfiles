#========================== VARIABLES ==============================#

# Color from Xresources
set_from_resource $foreground foreground
set_from_resource $background background
set_from_resource $background2 color8
set_from_resource $primary color12
set_from_resource $secondary color3
set_from_resource $warning color1
set_from_resource $border color0
set_from_resource $border2 color0

# Mod and Submod keys
set $mod Mod1
set $smod Mod4

# Workspaces
# set $ws1 "1:usr"
# set $ws2 "2:msg"
# set $ws3 "3:cal"
# set $ws4 "4:vid"
# set $ws5 "5:lib"
# set $ws6 "6:media"
# set $ws7 "7:dev"
# set $ws8 "8:work"
# set $ws9 "9:term"
# set $ws10 "10:web"

set $ws1 "1   "
set $ws2 "2   "
set $ws3 "3   "
set $ws4 "4   "
set $ws5 "5   "
set $ws6 "6   "
set $ws7 "7   "
set $ws8 "8   "
set $ws9 "9   "
set $ws10 "10  "

floating_modifier $mod 

#======================== AUTOSTART ===============================#

exec        --no-startup-id ~/.config/i3/autostart

# Default layout
# exec        --no-startup-id ~/.bin/screen/hdmi

# Background
# exec_always --no-startup-id hsetroot -cover ~/Pictures/wallpaper/7zav1np1ss761.jpg
exec_always --no-startup-id hsetroot -solid "#000000"
# exec_always --no-startup-id feh --bg-fill ~/Pictures/wallpaper/beautiful-city_-wallpaper.jpg

#============================ KEYBINDING ===========================#

#============ CONTROLS 

# Volume
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +2%
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -2%
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle


bindsym $mod+F1 exec --no-startup-id ~/.bin/open pavucontrol
bindsym $mod+F2 exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym $mod+F3 exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -2%
bindsym $mod+F4 exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +2%

# Brightness
bindsym $mod+F7 exec --no-startup-id brightnessctl s 5%-
bindsym $mod+F8 exec --no-startup-id brightnessctl s 5%+

# Power
bindsym $mod+p exec --no-startup-id "pkexec env DISPLAY=$DISPLAY XAUTHORITY=$XAUTHORITY ~/.bin/powerprofile && :"

# I3
bindsym $smod+Shift+c reload
bindsym $smod+Shift+r restart

# Systems 
bindsym --release $smod+x exec i3lock --color=000000 --show-failed-attempts
bindsym --release $smod+Shift+x exec systemctl suspend
bindsym --release $smod+Shift+Escape exec ~/.bin/rebootoption 
bindsym --release $smod+Escape exec ~/.bin/prompt "Shutdown" "poweroff"
bindsym --release $smod+Shift+e exec ~/.bin/prompt "Logout" "i3-msg exit"


#=========== WINDOW 

# Kill 
bindsym $mod+q kill

# Change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# Move focused
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Change focus between tiling / floating windows
bindsym $mod+Shift+Space floating toggle
bindsym $mod+Space focus mode_toggle

# Focus parent/child 
# bindsym $mod+a focus parent
bindsym $mod+c focus child

# Split 
bindsym $smod+w split h
bindsym $smod+s split v

# Fullscreen 
bindsym $mod+f fullscreen toggle

# Resize
set $inc 5
bindsym $mod+Left resize shrink width $inc px or $inc ppt
bindsym $mod+Down resize grow height $inc px or $inc ppt
bindsym $mod+Up resize shrink height $inc px or $inc ppt 
bindsym $mod+Right resize grow width $inc px or $inc ppt 

# Move window to workspace
bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2 
bindsym $mod+Shift+3 move container to workspace $ws3 
bindsym $mod+Shift+4 move container to workspace $ws4 
bindsym $mod+Shift+5 move container to workspace $ws5 
bindsym $mod+Shift+6 move container to workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10

#============ UTILS 

# Youtube
bindsym $smod+y exec ~/.bin/yt -r

# Terminal
bindsym $mod+Return exec ~/.bin/open kitty --single-instance
bindsym $mod+Shift+Return exec kitty --single-instance

# Dmenu
bindsym $smod+d exec ~/.bin/menu

# Timer
bindsym $mod+d exec ~/.bin/dtimer

# Screen Shot
bindsym $smod+Print exec ~/.bin/prtsc current_screen
bindsym Print exec ~/.bin/prtsc area_c

# Windows
# bindsym $smod+Shift+F12 exec "prime-run VBoxManage startvm Windows10"

# Applications
# Browser/Browser apps
bindsym $mod+n exec ~/.bin/open $BROWSER
bindsym $mod+Shift+n exec $BROWSER ; workspace number $ws10 

bindsym $mod+Shift+m exec ~/.bin/open messenger
bindsym $mod+Shift+g exec ~/.bin/open telegram-deskstop
bindsym $mod+Shift+p exec ~/.bin/open keeweb
bindsym $mod+Shift+f exec ~/.bin/open spotify
bindsym $mod+Shift+b exec ~/.bin/open calibre

bindsym $mod+Shift+s exec ~/.bin/open slack
bindsym $mod+Shift+d exec ~/.bin/open discord

bindsym $mod+Shift+e exec ~/.bin/open $FILE_MANAGER

#============ WORKSPACE 

# Change workspace layout 
bindsym $mod+s layout stacking
bindsym $mod+t layout tabbed
bindsym $mod+e layout toggle split

# Switch next/previous workspace
bindsym $mod+u workspace prev
bindsym $mod+i workspace next

# Focus workspace
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10

# Move focused workspace between monitors
bindsym $mod+greater move workspace to output right
bindsym $mod+less move workspace to output left

#=========================== CONFIG ===============================#

#=========== WINDOW 

for_window  [class=".*"] title_format "<b>%title</b>"
title_align center
new_window pixel 1


# Colors
#                       border      background     text       indicator  child_border
client.focused          $border2    $background2     $foreground   $secondary    $primary
client.unfocused        $border2    $background    $foreground   $secondary    $background
client.focused_inactive $border     $background    $foreground   $secondary    $background
client.urgent           $primary    $background2     $foreground   $primary  $primary

#=========== MOUSE

mouse_warping none
focus_follows_mouse no 
# workspace_auto_back_and_forth yes

#=========== FONT 

font pango:Font Awesome 5 Free 9, NotoSans Nerd Font 9

#=========== WORKSPACE 

# for_window [workspace=$ws10] layout tabbed
# for_window [workspace=$ws1] layout tabbed
# for_window [workspace=$ws2] layout tabbed
# for_window [workspace=$ws5] layout tabbed
workspace_layout tabbed

#=========== STATUSBAR

# Bar1
bar {
    output eDP-1

    # status_command i3status-rs ~/.config/i3status-rust/config_lap.toml
    status_command i3status-rs ~/.config/i3status-rust/config.toml

    colors {
        background $background
        separator $foreground
        statusline $foreground

        #                  border         background         text
        focused_workspace  $border2       $background2     $foreground
        active_workspace   $border2       $background2     $foreground
        inactive_workspace $border        $background      $foreground
        urgent_workspace   $primary       $primary         $foreground
        binding_mode       $primary       $primary         $foreground
    }

    workspace_min_width 50
    # position top
    # tray_output none
    # strip_workspace_numbers yes
}

# Bar2
# bar {
#     output HDMI-1

#     status_command i3status-rs ~/.config/i3status-rust/config.toml

#     colors {
#         background $background
#         separator $foreground
#         statusline $foreground

#         #                  border           background        text
#         focused_workspace  $border2         $background2        $foreground
#         active_workspace   $border2         $background2        $foreground
#         inactive_workspace $border          $background         $foreground
#         urgent_workspace   $primary         $primary            $foreground
#         binding_mode       $primary         $primary            $foreground
#     }
#     workspace_min_width 50
#     # strip_workspace_numbers yes
# }


for_window [class="Pcmanfm"] floating enable
for_window [class="Pcmanfm"] resize set 1280 720

#=========================== ASSIGN ===============================#

# ws1 usr
assign     [class="Thunderbird"] $ws1
assign     [class="Mailspring"] $ws1
assign     [class="KeeWeb"] $ws1

# ws2 msg
assign     [class="Slack"] $ws2
assign     [instance="signal" class="Signal"] $ws2
assign     [class="discord"] $ws2
assign     [class="TelegramDesktop"] $ws2
assign     [window_role="pop-up" instance="www.messenger.com" class="Brave-browser"] $ws2

# ws3 soc
assign     [window_role="pop-up" instance="calendar.google.com" class="Brave-browser"] $ws3

# ws4 vid
assign     [class="zoom"] $ws4

# ws5 lib
assign     [class="calibre"] $ws5
assign     [class="obsidian"] $ws5

# ws6 media
assign     [class="mpv"] $ws6
assign     [class="Spotify"] $ws6
for_window     [class="Spotify"] move to workspace $ws6
assign 		 [class="FreeTube"] $ws6

# ws7 dev
assign     [class="scrcpy"] $ws7
assign     [class="VirtualBox Machine"] $ws7
assign     [class="jetbrains-idea-ce"] $ws7
assign     [class="jetbrains-studio"] $ws7
assign     [class="Code"] $ws7

# ws8 work
assign     [instance="libreoffice"] $ws8
assign     [class="okular"] $ws8
assign     [class="RemNote"] $ws8

# ws9 term
for_window [class="kitty"] move to workspace $ws9

# ws10 web
assign     [class="Vivaldi-stable"] $ws10
assign     [class="Brave-browser"] $ws10
assign     [class="firefox"] $ws10

