#=============================== VARIABLES ===================================#

# Colors 
set $foreground #ffffff
set $background #101010
set $background2 #424242
set $primary #0078d7
set $secondary #ffb900
set $warning #e81123
set $border #101010
set $border2 #101010
set $opacity 0.95

# Mod and Submod keys
set $mod Mod1
set $smod Mod4

set $ws1 "1   "
set $ws2 "2   "
set $ws3 "3   "
set $ws4 "4  $ "
set $ws5 "5  ? "
set $ws6 "6  ? "
set $ws7 "7   "
set $ws8 "8   "
set $ws9 "9   "
set $ws10 "10  "

floating_modifier $mod 

#================================== INPUT ====================================#

# Keyboard
input type:keyboard {
		repeat_delay 225
		repeat_rate 200
}

# Touchpad
input type:touchpad {
    events disabled
    # tap enabled
    # natural_scroll enabled
		# scroll_factor 0.5
		# dwt enabled
}

# Mouse
input type:pointer {
		scroll_factor 0.5
		dwt enabled
}

# Numlock
input * xkb_numlock enable

# Cursor
seat seat0 xcursor_theme default 32

seat seat0 hide_cursor 8000

seat seat0 hide_cursor when-typing enable

#============================= STARTUP SCRIPTS ===============================#

exec ~/.config/sway/autostart

#================================ DISPLAY ====================================#

# Background
output * bg #000000 solid_color
exec_always kill kanshi; kanshi
exec_always ~/.sh/wm_pswall
output * adaptive_sync on
output HDMI-A-1 enable position 0,-1080
output eDP-1 enable position 0,0

#=============================== KEYBINDING ==================================#

# Xkeys 
bindsym XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +2%
bindsym XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -2%
bindsym XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle

# Volume
bindsym $mod+F1 exec pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym $mod+F2 exec pactl set-sink-volume @DEFAULT_SINK@ -2%
bindsym $mod+F3 exec pactl set-sink-volume @DEFAULT_SINK@ +2%
bindsym $mod+F4 exec ~/.sh/wm_open pavucontrol

# Music Control
bindsym $mod+F11 exec playerctl -p spotify play-pause
bindsym $mod+F12 exec playerctl -p spotify next

# Brightness
bindsym $mod+F7 exec brightnessctl s 5%-
bindsym $mod+F8 exec brightnessctl s 5%+
bindsym $mod+Shift+F7 exec exmonctl -d 5
bindsym $mod+Shift+F8 exec exmonctl -i 5

# Power
bindsym $mod+p exec ~/.sh/menu_powerprofile

# Sway
bindsym $smod+Shift+r reload

# System
bindsym --release $smod+x exec swaylock
bindsym --release $smod+Shift+x exec systemctl suspend
bindsym --release $smod+Shift+Escape exec ~/.sh/menu_reboot
bindsym --release $smod+Escape exec ~/.sh/menu_prompt "Shutdown" "poweroff"
bindsym --release $smod+Shift+e exec ~/.sh/menu_prompt "Logout" "swaymsg exit"

#============ WINDOWS 

# Close window 
bindsym $mod+q kill

# Change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# Move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Change focus between tiling / floating windows
bindsym $mod+Shift+space floating toggle; [tiling con_id=__focused__] border pixel 1; [floating con_id=__focused__] border normal

# Focus parent/child 
bindsym $mod+a focus parent
bindsym $mod+c focus child

# Split 
bindsym $smod+w split h
bindsym $smod+s split v

# Fullscreen 
bindsym $mod+f fullscreen toggle

# Resize
set $inc 10
bindsym $mod+Left resize shrink width $inc px or $inc ppt
bindsym $mod+Down resize grow height $inc px or $inc ppt
bindsym $mod+Up resize shrink height $inc px or $inc ppt 
bindsym $mod+Right resize grow width $inc px or $inc ppt 

# Move window to workspace
bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2 
bindsym $mod+Shift+3 move container to workspace $ws3 
bindsym $mod+Shift+4 move container to workspace $ws4 
bindsym $mod+Shift+5 move container to workspace $ws5 
bindsym $mod+Shift+6 move container to workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10

# Terminal
bindsym $mod+Return exec ~/.sh/wm_open alacritty 
bindsym $mod+Shift+Return exec alacritty

# Browser
bindsym $mod+n exec ~/.sh/wm_open $(xdg-mime query default text/html | cut -f 1 -d '.')

# Launcher
bindsym $smod+d exec ~/.sh/menu_run

# Timer
bindsym $mod+d exec ~/.sh/menu_timer

# Screen Shot
bindsym Print exec grim -g "$(slurp)" - | wl-copy

# Applications
bindsym $mod+Shift+a exec ~/.sh/wm_open $(xdg-mime query default x-scheme-handler/mailto | cut -f 1 -d '.')
bindsym $mod+Shift+s exec ~/.sh/wm_open spotify
bindsym $mod+Shift+c exec ~/.sh/wm_open calibre
bindsym $mod+Shift+e exec ~/.sh/wm_open $(xdg-mime query default inode/directory | cut -f 1 -d '.')
bindsym $mod+Shift+o exec ~/.sh/wm_open obsidian
bindsym $mod+Shift+z exec ~/.sh/wm_open zotero
bindsym $mod+Shift+b exec ~/.sh/wm_open blueman-manager
bindsym $mod+Shift+p exec ~/.sh/wm_open keepassxc
bindsym $mod+semicolon exec ~/.sh/wm_open neovide

# Toggle Ibus
bindsym $mod+z exec ~/.sh/util_toggleibus 

# Mount drive
bindsym $smod+m exec ~/.sh/menu_mount

# Unmount drive
bindsym $smod+Shift+m exec ~/.sh/menu_umount

# Play track
bindsym $mod+Shift+m exec ~/.sh/menu_spotifyplay 

#============ WORKSPACE 

# Change workspace layout 
bindsym $mod+s layout stacking
bindsym $mod+t layout tabbed
bindsym $mod+e layout toggle split

# Switch next/previous workspace
bindsym $mod+u workspace prev
bindsym $mod+i workspace next

# Focus workspace
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10

# Move focused workspace between monitors
bindsym $mod+greater move workspace to output right
bindsym $mod+less move workspace to output left

#================================= CONFIG ====================================#

# Window title
for_window  [class=".*"] title_format "<b>%title</b>"
title_align center

# Window border
default_border pixel 1
default_floating_border normal
hide_edge_borders --i3 smart

# Window colors
#                       border      background     text       	 indicator  	 child_border
client.focused          $border2    $background2   $foreground   $secondary    $primary
client.unfocused        $border2    $background    $foreground   $secondary    $background
client.focused_inactive $border     $background    $foreground   $secondary    $background
client.urgent           $primary    $background2   $foreground   $primary  		 $primary

# Mouse behaviors
mouse_warping none
focus_follows_mouse no 
# workspace_auto_back_and_forth yes

# Global font 
font pango:NotoSans Nerd Font 9

# Default workspace layout 
workspace_layout tabbed

# Bar
bar {
    status_command i3status-rs ~/.config/i3status-rust/config.toml
    colors {
        background $background
        separator $foreground
        statusline $foreground

        #                  border         background       text
        focused_workspace  $border2       $background2     $foreground
        active_workspace   $border2       $background2     $foreground
        inactive_workspace $border        $background      $foreground
        urgent_workspace   $primary       $primary         $foreground
        binding_mode       $primary       $primary         $foreground
    }

    workspace_min_width 50
    # position top
    # tray_output none
    # strip_workspace_numbers yes
}

#============================ WINDOWS BEHAVIORS ==============================#

# Floating
for_window [app_id="pcmanfm"] floating enable
for_window [app_id="pcmanfm"] resize set 1280 720
for_window [title="Extension: (Zotero Connector) - Zotero Item Selector — Mozilla Firefox"] floating enable
for_window [title="Wi Hotspot"] floating enable
for_window [app_id="org.kde.okular" title="New Text Note — Okular"] floating enable

# Transparency
for_window [app_id="Alacritty"] opacity $opacity

# ws1 mail
assign     [app_id="thunderbird"] $ws1
assign     [class="Mailspring"] $ws1
assign     [app_id="org.keepassxc.KeePassXC"] $ws1


# ws2 media
assign     [class="Spotify"] $ws2
for_window [class="Spotify"] move to workspace $ws2
assign     [class="scrcpy"] $ws2

# ws3 lib
assign     [app_id="calibre"] $ws3
assign     [class="Zotero"] $ws3

# ws4 trade
assign     [class="Binance"] $ws4
for_window [class="Binance"] move to workspace $ws4
assign     [class="Exodus"] $ws4

# ws5 

# ws6 

# ws7 dev
assign     [class="VirtualBox Machine"] $ws7
assign     [class="jetbrains-idea-ce"] $ws7
assign     [class="jetbrains-studio"] $ws7
assign     [class="Code"] $ws7

# ws8 work
assign     [app_id="libreoffice"] $ws8
assign     [class="obsidian"] $ws8
assign 		 [app_id="org.kde.okular"] $ws8

# ws9 term
assign     [app_id="Alacritty"] $ws9

# ws10 web
assign     [app_id="firefox"] $ws10
assign 		 [app_id="brave-browser"] $ws10
